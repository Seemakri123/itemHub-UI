<!doctype html>
<html>
  <head>
    <title>ItemHub</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f6f8;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      .container {
        background: #ffffff;
        padding: 25px;
        width: 360px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
        max-height: 95vh;
      }

      h2 {
        text-align: center;
        margin-bottom: 15px;
        color: #333;
      }

      input {
        width: 100%;
        padding: 10px;
        margin-bottom: 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
      }

      input:focus {
        border-color: #007bff;
        outline: none;
      }

      button {
        width: 100%;
        padding: 10px;
        background-color: #007bff;
        color: white;
        font-size: 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-bottom: 10px;
      }

      button:hover {
        background-color: #0056b3;
      }

      #result {
        margin-bottom: 10px;
        text-align: center;
        font-weight: bold;
      }

      .success {
        color: green;
      }

      .error {
        color: red;
      }

      hr {
        margin: 20px 0;
      }

      pre {
        background: #f1f1f1;
        padding: 10px;
        font-size: 13px;
        overflow-x: auto;
        border-radius: 4px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <!-- ADD ITEM -->
      <h2>Add Item</h2>

      <input id="name" placeholder="Name" />
      <input id="desc" placeholder="Description" />
      <input id="price" type="number" placeholder="Price" />
      <input id="category" placeholder="Category" />

      <button onclick="addItem()">Add Item</button>

      <p id="result"></p>

      <hr />

      <!-- QUERY ITEM -->
      <h2>Query Item</h2>

      <input id="itemId" type="number" placeholder="Enter Item ID" />

      <button onclick="getItem()">Get Item</button>

      <pre id="itemResult"></pre>
    </div>

    <script>
function addItem() {
  fetch("https://itemhub-api-production.up.railway.app/api/items", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      name: document.getElementById("name").value,
      description: document.getElementById("desc").value,
      price: Number(document.getElementById("price").value),
      category: document.getElementById("category").value
    })
  })
  .then(async res => {
    const text = await res.text(); // SAFEST
    if (res.status === 201 || res.status === 200) {
      showSuccess(text);
    } else {
      throw new Error(text);
    }
  })
  .catch(err => {
    showError();
  });
}

function showSuccess(response) {
  const result = document.getElementById("result");
  result.className = "success";
  result.innerText = "Item added successfully!";
}

function showError() {
  const result = document.getElementById("result");
  result.className = "error";
  result.innerText = "Error adding item";
}

function getItem() {
      const id = document.getElementById("itemId").value;

      fetch(`https://itemhub-api-production.up.railway.app/api/items/${id}`)
        .then(res => {
          if (!res.ok) {
            throw new Error("Item not found");
          }
          return res.json();
        })
        .then(data => {
          document.getElementById("itemResult").innerText =
            JSON.stringify(data, null, 2);
        })
        .catch(err => {
          document.getElementById("itemResult").innerText =
            err.message;
        });
    }
</script>

  </body>
</html>
